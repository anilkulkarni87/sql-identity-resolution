{
  "name": "IDR Hourly",
  "description": "Hourly incremental identity resolution run",
  "tasks": [
    {
      "task_key": "dry_run",
      "description": "Preview changes with dry run",
      "notebook_task": {
        "notebook_path": "/Repos/your-org/sql-identity-resolution/sql/databricks/notebooks/IDR_Run",
        "base_parameters": {
          "RUN_MODE": "INCR",
          "DRY_RUN": "true",
          "MAX_ITERS": "30"
        }
      },
      "existing_cluster_id": "${cluster_id}",
      "timeout_seconds": 3600
    },
    {
      "task_key": "live_run",
      "description": "Apply changes to production",
      "depends_on": [{"task_key": "dry_run"}],
      "notebook_task": {
        "notebook_path": "/Repos/your-org/sql-identity-resolution/sql/databricks/notebooks/IDR_Run",
        "base_parameters": {
          "RUN_MODE": "INCR",
          "DRY_RUN": "false",
          "MAX_ITERS": "30"
        }
      },
      "existing_cluster_id": "${cluster_id}",
      "timeout_seconds": 7200
    }
  ],
  "schedule": {
    "quartz_cron_expression": "0 0 * * * ?",
    "timezone_id": "UTC",
    "pause_status": "UNPAUSED"
  },
  "email_notifications": {
    "on_failure": ["alerts@company.com"],
    "on_start": [],
    "on_success": []
  },
  "max_concurrent_runs": 1,
  "format": "MULTI_TASK"
}
